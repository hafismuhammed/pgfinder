{% extends 'formbase.html' %}
{% load static %}
{% block content %}
{% load crispy_forms_tags %}

<!-- banner-text -->
<div class="banner-w3ltext about-w3bnr">
	<div class="container">
		<h1 class="text-white text-center">
			<a href="{% url 'home' %}" class="img-fluid">Home</a> / Booking Details</h1>
	</div>
</div>
<!-- //banner-text -->
</div>
<!-- //banner -->
<!-- search result -->
<section class="wthree-row w3-gallery py-5">
	<div class="container-fluid py-xl-5 py-lg-3">
		<div class="text-center mb-lg-5 mb-4">
			<h3><strong class="tittle mb-2">Booking Details</strong></h3>
			<p>Please provide us datails to proceede with booking</p>
        </div>

	<div class="container">
		<div class="row">
			<div class="col-lg-8">
				<div>
					<form method="POST">
						{% csrf_token %}
						<h3>Your Details</h3><hr>
						{{ form|crispy }}
						<hr>
						<div class="py-5 text-danger">
							<h4>Attention! Please read important booking information!</h4>
						</div>
						<div class="py-3">
							<strong>We will be confirming the booking in 2 hours. You will be notified via Email about the booking status</strong>
						</div>	
						<div class="my-3">
							<input type="checkbox">
							<label> I acknowledge that I have read and accept the <a href="#"> Rules & Restrictions</a></label>
						</div>
						<button type="submit" class="btn btn-success">Complete Booking</button>
					</form>
					<br>
				</div>
			</div>
			
			<div class="col-lg-4">
				<div class="box-element">
						<h3>Booking Summary</h3>
						<hr>
						{% if property %}
						
							<div><img class="img-fluid row-image" src="{{ property.images.url }}" ></div>
							<div class="py-3">
								<h5>{{ property.headline }}</h5>
							</div><hr>
							<div class="py-3">
								<h6><strong>1 Month Price: </strong>$ {{ property.rent }}</h6><hr>
							</div>
							<div class="py-3">
								<h6><strong>Deposite: </strong>$ {{ property.deposite }}</h6><hr>
							</div>
							<div class="pt-3">
								<h5><strong>Total Price: </strong>$ {{ property.rent }}</h5><hr>
							</div>
						
					</div>
					{% endif %}
				</div>
			</div>

			<!--Razorupay payment settings-->
			{% if payment %}
			 <form action="{% url 'payment_success' %}" method="POST">
				{% csrf_token %}
				<script
					src="https://checkout.razorpay.com/v1/checkout.js"
					data-key="rzp_test_8ByHObWr7wXRoA" // Enter the Test API Key ID generated from Dashboard → Settings → API Keys
					data-amount="{{ payment.amount }}" // Amount is in currency subunits. Hence, 29935 refers to 29935 paise or ₹299.35.
					data-currency="USD"//You can accept international payments by changing the currency code. Contact our Support Team to enable International for your account
					data-order_id="{{ payment.id }}"//Replace with the order_id generated by you in the backend.
					data-buttontext="Pay with Razorpay"
					data-name="WhiteBricks Paying Gust Booking Payment"
					data-description="A Wild Sheep Chase is the third novel by Japanese author Haruki Murakami"
					data-image="https://example.com/your_logo.jpg"
					data-prefill.name="{{ user }}"
					data-prefill.email="gaurav.kumar@example.com"
					data-theme.color="#F37254"
				></script>
				<input type="hidden" custom="Hidden Element" name="hidden">
				</form> 

				
				{% endif %}
			<!--//Razorupay payment settings-->

		</div>
	</div>


</div>
</section>

{% endblock %}